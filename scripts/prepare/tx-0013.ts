// Do the listing of sUSD and yUSD
// scheduled

import hre from 'hardhat';
import assert from 'assert';
import { getTimelock, prepareTimelockData } from '../prepare-timelock';
import { mockExecuteTimelock } from '../mock-exec-timelock';
import { ContractTransaction } from 'ethers';

const job = async () => {
  assert(
    hre.network.name === 'mainnet' ||
      hre.network.name === 'hardhat' ||
      hre.network.name === 'tenderly',
    'not mainnet'
  );
  console.log('using network', hre.network.name);
  const timelock = await getTimelock(hre, '0x00000Ab6Ee5A6c1a7Ac819b01190B020F7c6599d');
  const safe = '0x4e88e72bd81c7ea394cb410296d99987c3a242fe';
  const pool = await hre.ethers.getContractAt('Pool', '0xD3a4DA66EC15a001466F324FA08037f3272BDbE8');

  const txs: ContractTransaction[] = [];

  // sUSDe Mar PT
  txs.push({
    to: '0x43CcF5E5F694E15Ec159bC7112c6119bac84f79e',
    data: '0x107eef45000000000000000000000000e3c3c5ead58fc2bed4e577e38985b8f7f1ddff000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000fa4b5f9b5961c052dd47f4e78901dedfcd08c473000000000000000000000000e00bd3df25fb187d6abbb620b3dfd19839947b810000000000000000000000000000000000000000000000000000000000001f40000000000000000000000000000000000000000000000000000000000000213400000000000000000000000000000000000000000000000000000000000028a000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000007a12000000000000000000000000000000000000000000000000000000000000186a00000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000003fafa5171dee3c3341a12942593199644983e16a00000000000000000000000090aa23e0eeeeedf398a1d5cca7fb3e47b75b055c0000000000000000000000007b9d0d6406a2274bec6f35c15f860cc66fbbff1100000000000000000000000000000000000000000000000000000000000000120000000000000000000000006b534c6904ee137b021490622a24c8fff89f5a63000000000000000000000000e00bd3df25fb187d6abbb620b3dfd19839947b810000000000000000000000004e88e72bd81c7ea394cb410296d99987c3a242fe000000000000000000000000bc2fdc58e3e06d265b46e32771442b7f5098725b00000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000000225a65726f4c656e6420505420457468656e612073555344452032374d41523230323500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000147a3050542d73555344452d32374d415232303235000000000000000000000000000000000000000000000000000000000000000000000000000000000000002c5a65726f4c656e64207a6b205661726961626c6520446562742050542d73555344452d32374d415232303235000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000207661726961626c65446562747a3050542d73555344452d32374d415232303235000000000000000000000000000000000000000000000000000000000000002a5a65726f4c656e64207a6b20537461626c6520446562742050542d73555344452d32374d41523230323500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e737461626c65446562747a3050542d73555344452d32374d415232303235000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000',
  });

  // USDe Mar PT
  txs.push({
    to: '0x43CcF5E5F694E15Ec159bC7112c6119bac84f79e',
    data: '0x107eef45000000000000000000000000e3c3c5ead58fc2bed4e577e38985b8f7f1ddff00000000000000000000000000000000000000000000000000000000000000018000000000000000000000000008362b926051b2fc209c74dce6670b9608d3e92f0000000000000000000000008a47b431a7d947c6a3ed6e42d501803615a97eaa0000000000000000000000000000000000000000000000000000000000001f40000000000000000000000000000000000000000000000000000000000000213400000000000000000000000000000000000000000000000000000000000028a000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000007a12000000000000000000000000000000000000000000000000000000000000186a00000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000003fafa5171dee3c3341a12942593199644983e16a00000000000000000000000090aa23e0eeeeedf398a1d5cca7fb3e47b75b055c0000000000000000000000007b9d0d6406a2274bec6f35c15f860cc66fbbff1100000000000000000000000000000000000000000000000000000000000000120000000000000000000000006b534c6904ee137b021490622a24c8fff89f5a630000000000000000000000008a47b431a7d947c6a3ed6e42d501803615a97eaa0000000000000000000000004e88e72bd81c7ea394cb410296d99987c3a242fe000000000000000000000000bc2fdc58e3e06d265b46e32771442b7f5098725b00000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000000215a65726f4c656e6420505420457468656e6120555344652032374d4152323032350000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000137a3050542d555344652d32374d41523230323500000000000000000000000000000000000000000000000000000000000000000000000000000000000000002b5a65726f4c656e64207a6b205661726961626c6520446562742050542d555344652d32374d415232303235000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f7661726961626c65446562747a3050542d555344652d32374d4152323032350000000000000000000000000000000000000000000000000000000000000000295a65726f4c656e64207a6b20537461626c6520446562742050542d555344652d32374d4152323032350000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d737461626c65446562747a3050542d555344652d32374d41523230323500000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000',
  });

  // ZAI Stablecoin
  txs.push({
    to: '0x43CcF5E5F694E15Ec159bC7112c6119bac84f79e',
    data: '0x107eef45000000000000000000000000e3c3c5ead58fc2bed4e577e38985b8f7f1ddff00000000000000000000000000000000000000000000000000000000000000018000000000000000000000000008e8ec507968185efb94efd2d355f9932a0f755100000000000000000000000069000dfd5025e82f48eb28325a2b88a241182ced0000000000000000000000000000000000000000000000000000000000001f40000000000000000000000000000000000000000000000000000000000000213400000000000000000000000000000000000000000000000000000000000028a000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000007a12000000000000000000000000000000000000000000000000000000000000186a00000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000003fafa5171dee3c3341a12942593199644983e16a00000000000000000000000090aa23e0eeeeedf398a1d5cca7fb3e47b75b055c0000000000000000000000007b9d0d6406a2274bec6f35c15f860cc66fbbff1100000000000000000000000000000000000000000000000000000000000000120000000000000000000000006b534c6904ee137b021490622a24c8fff89f5a6300000000000000000000000069000dfd5025e82f48eb28325a2b88a241182ced0000000000000000000000004e88e72bd81c7ea394cb410296d99987c3a242fe000000000000000000000000bc2fdc58e3e06d265b46e32771442b7f5098725b00000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000026000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000175a65726f4c656e64205a414920537461626c65636f696e00000000000000000000000000000000000000000000000000000000000000000000000000000000057a305a4149000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d5a65726f4c656e64207a6b205661726961626c652044656274205a414900000000000000000000000000000000000000000000000000000000000000000000117661726961626c65446562747a305a4149000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001b5a65726f4c656e64207a6b20537461626c652044656274205a41490000000000000000000000000000000000000000000000000000000000000000000000000f737461626c65446562747a305a4149000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000',
  });

  // Staked ZAI
  txs.push({
    to: '0x43CcF5E5F694E15Ec159bC7112c6119bac84f79e',
    data: '0x107eef45000000000000000000000000e3c3c5ead58fc2bed4e577e38985b8f7f1ddff00000000000000000000000000000000000000000000000000000000000000018000000000000000000000000008e8ec507968185efb94efd2d355f9932a0f755100000000000000000000000069000195d5e3201cf73c9ae4a1559244df38d47c0000000000000000000000000000000000000000000000000000000000001f40000000000000000000000000000000000000000000000000000000000000213400000000000000000000000000000000000000000000000000000000000028a000000000000000000000000000000000000000000000000000000000000f4240000000000000000000000000000000000000000000000000000000000007a12000000000000000000000000000000000000000000000000000000000000186a00000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000003fafa5171dee3c3341a12942593199644983e16a00000000000000000000000090aa23e0eeeeedf398a1d5cca7fb3e47b75b055c0000000000000000000000007b9d0d6406a2274bec6f35c15f860cc66fbbff1100000000000000000000000000000000000000000000000000000000000000120000000000000000000000006b534c6904ee137b021490622a24c8fff89f5a6300000000000000000000000069000195d5e3201cf73c9ae4a1559244df38d47c0000000000000000000000004e88e72bd81c7ea394cb410296d99987c3a242fe000000000000000000000000bc2fdc58e3e06d265b46e32771442b7f5098725b00000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000026000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000320000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000135a65726f4c656e64205374616b6564205a41490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000067a30735a41490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e5a65726f4c656e64207a6b205661726961626c65204465627420735a4149000000000000000000000000000000000000000000000000000000000000000000127661726961626c65446562747a30735a41490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c5a65726f4c656e64207a6b20537461626c65204465627420735a4149000000000000000000000000000000000000000000000000000000000000000000000010737461626c65446562747a30735a41490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000',
  });

  const tx = await prepareTimelockData(hre, safe, txs, timelock.target);
  const reservesCount = await pool.getReservesCount();

  console.log('reserves count', reservesCount.toString());
  await mockExecuteTimelock(tx.schedule, tx.execute, 86400 * 5, 'mainnet', async () => {
    const reservesCountAfter = await pool.getReservesCount();
    console.log('reserves count after', reservesCountAfter.toString());
  });
};

job();
